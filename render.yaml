services:
  - type: web
    name: cv-matcher-app
    env: docker
    dockerfilePath: ./Dockerfile
    region: oregon
    plan: starter

    envVars:
      - key: CACHE_DIR
        value: /app/cache
      - key: PYTHONUNBUFFERED
        value: "1"

    healthCheckPath: /_stcore/health
    autoDeploy: true

    # NOTE: Disk persistence requires paid plan. Free tier relies on pre-computed embeddings.
    # To add disk persistence when upgrading:
    # disk:
    #   - name: embedding_cache
    #     mountPath: /app/cache
    #     sizeGB: 2
